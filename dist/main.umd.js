var B=Object.defineProperty;var C=Object.getOwnPropertySymbols;var H=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable;var E=(e,o,u)=>o in e?B(e,o,{enumerable:!0,configurable:!0,writable:!0,value:u}):e[o]=u,l=(e,o)=>{for(var u in o||(o={}))H.call(o,u)&&E(e,u,o[u]);if(C)for(var u of C(o))J.call(o,u)&&E(e,u,o[u]);return e};var h=(e,o,u)=>(E(e,typeof o!="symbol"?o+"":o,u),u),$=(e,o,u)=>{if(!o.has(e))throw TypeError("Cannot "+u)};var S=(e,o,u)=>($(e,o,"read from private field"),u?u.call(e):o.get(e)),R=(e,o,u)=>{if(o.has(e))throw TypeError("Cannot add the same private member more than once");o instanceof WeakSet?o.add(e):o.set(e,u)},M=(e,o,u,m)=>($(e,o,"write to private field"),m?m.call(e,u):o.set(e,u),u);(function(e,o){typeof exports=="object"&&typeof module!="undefined"?o(exports):typeof define=="function"&&define.amd?define(["exports"],o):(e=typeof globalThis!="undefined"?globalThis:e||self,o(e.__LAKE__={}))})(this,function(e){var a;"use strict";function o(n,t){if(!n)throw new Error(t||"unexpected condition")}const u=(n,t)=>Array.from((t!=null?t:document).querySelectorAll(n)),m=()=>{};class b{constructor(t){R(this,a,void 0);M(this,a,t)}set value(t){M(this,a,t)}get value(){return S(this,a)}}a=new WeakMap;const y=n=>new b(n);let p=null;const T=n=>p=n,U=()=>p=null,v=n=>(o(p,`"${n}" called outside setup() will never be run.`),p);function N(n){v("onMounted").onMounted.push(n)}function g(n){v("onUnmounted").onUnmounted.push(n)}class D{constructor(t,r,s){h(this,"onMounted",[]);h(this,"onUnmounted",[]);h(this,"parent",null);h(this,"uid");h(this,"provides");this.element=r,T(this);const c=t(r,s);U(),this.provides=c||{},this.uid=r.id}mount(){this.onMounted.forEach(t=>t())}unmount(){this.onUnmounted.forEach(t=>t())}addChild(t){this.onMounted.push(...t.onMounted),this.onUnmounted.push(...t.onUnmounted),t.parent=this}}function O(n){return(t,r)=>{const s=l(l({},n.props),r),c=new D(n.setup,t,s);return n.components&&Object.entries(n.components).forEach(([i,f])=>{u(i,t).forEach(V=>{const W=P(V,f,c);c.addChild(W)})}),c}}function P(n,t,r){const s=l(l({},t.props),r.provides);return O(t)(n,s)}const d=new Map,w=new WeakMap,A=(n,t,r)=>{o(!w.has(n),`The DOM of ${r} was already bind.`),w.set(n,t)},_=n=>n;function j(n,t){return o(!d.has(n),`${n} was already registered.`),d.set(n,O(t)),d}function L(n){return o(d.has(n),`${n} does not registered.`),d.delete(n),d}function q(n,t,r){o(d.has(r),`${r} was never registered.`);const s=d.get(r)(n,t);A(n,s,r),s.mount()}function I(n,t){u(n,t).filter(r=>w.has(r)).forEach(r=>w.get(r).unmount())}function k(n,t){const r=i=>{const f=u(`[data-ref="${i}"]`,t);return s(f,i)},s=(i,f)=>{switch(i.length){case 0:throw new Error(`[data-ref="${f}"] does not exist`);case 1:return i[0];default:return i}};return[...n].reduce((i,f)=>(i[f]=r(f),i),{})}function z(n){return _({setup(t,r){const s=new Map;s.set("$",{rootRef:t,useDOMRef:(...i)=>({refs:k(new Set(i),t)})});const c=new n({target:t,props:r,context:s});g(()=>{c.$destroy()})}})}let Q;function F(){throw new Error("Function called outside component initialization")}function G(n){F().$$.on_destroy.push(n)}Promise.resolve();const K=(n,t,r)=>{n.addEventListener(t,r),G(()=>{n.removeEventListener(t,r)})};e.assert=o,e.defineComponent=_,e.mount=q,e.noop=m,e.onMounted=N,e.onUnmounted=g,e.q=u,e.ref=y,e.register=j,e.unmount=I,e.unregister=L,e.useEvent=K,e.withSvelte=z,Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
