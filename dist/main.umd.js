(function(o,s){typeof exports=="object"&&typeof module!="undefined"?s(exports):typeof define=="function"&&define.amd?define(["exports"],s):(o=typeof globalThis!="undefined"?globalThis:o||self,s(o.__LAKE__={}))})(this,function(o){"use strict";var L=Object.defineProperty;var j=(o,s,i)=>s in o?L(o,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):o[s]=i;var h=(o,s,i)=>(j(o,typeof s!="symbol"?s+"":s,i),i);function s(n,t){if(!n)throw new Error(t||"unexpected condition")}const i=(n,t)=>Array.from((t!=null?t:document).querySelectorAll(n)),C=()=>{};class _{constructor(t){h(this,"onUnmount",[]);h(this,"unmount",()=>{this.onUnmount.forEach(t=>t())});const e=t||C;this.onUnmount.push(e)}addChild(t){this.onUnmount.push(t.unmount)}}function l(n){return(t,e)=>{const u=Object.assign(n.props,e),d=n.setup(t,u),r=new _(d);return n.components&&Object.entries(n.components).forEach(([f,w])=>{i(f).forEach(b=>{const N=w.props||{},D=l(w)(b,N);r.addChild(D)})}),r}}const c=new Map,a=new WeakMap;function $(n,t,e){s(a.has(n)===!1,`The DOM of ${e} was already binding`),a.set(n,t)}const m=n=>n;function g(n,t){return s(c.has(n)===!1,`${n} was already registered`),c.set(n,l(t)),c}function M(n){return s(c.has(n),`${n} does not registered`),c.delete(n),c}function v(n,t,e){s(c.has(e),`${e} was never registered`);const u=c.get(e);$(n,u(n,t),e)}function R(n,t){i(n,t).filter(e=>a.has(e)).forEach(e=>a.get(e).unmount())}let U;function E(){throw new Error("Function called outside component initialization")}function p(n){E().$$.on_destroy.push(n)}function y(n){return E().$$.context.get(n)}Promise.resolve();function O(n,t){const e=r=>{const f=i(`[data-ref="${r}"]`,t);return u(f,r)},u=(r,f)=>{switch(r.length){case 0:throw new Error(`data-ref="${f}" does not exist`);case 1:return r[0];default:return r}};return[...n].reduce((r,f)=>(r[f]=e(f),r),{})}function P(n){return m({setup(t,e){const u=new Map;u.set("$",{rootRef:t,useDOMRef:(...r)=>({refs:O(new Set(r),t)})});const d=new n({target:t,props:e,context:u});return()=>{d.$destroy(),u.clear()}}})}function S(){return y("$")}function A(n,t,e,u){const d=Array.isArray(n);d?n.forEach(r=>r.addEventListener(t,e,u)):n.addEventListener(t,e,u),p(()=>{d?n.forEach(r=>r.removeEventListener(t,e,u)):n.removeEventListener(t,e,u)})}o.assert=s,o.defineComponent=m,o.getContext$=S,o.mount=v,o.q=i,o.register=g,o.unmount=R,o.unregister=M,o.useEvent=A,o.withSvelte=P,Object.defineProperties(o,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
