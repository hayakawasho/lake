var Q=Object.defineProperty;var _=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var R=(t,o,r)=>o in t?Q(t,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[o]=r,m=(t,o)=>{for(var r in o||(o={}))X.call(o,r)&&R(t,r,o[r]);if(_)for(var r of _(o))Y.call(o,r)&&R(t,r,o[r]);return t};var l=(t,o,r)=>(R(t,typeof o!="symbol"?o+"":o,r),r),$=(t,o,r)=>{if(!o.has(t))throw TypeError("Cannot "+r)};var C=(t,o,r)=>($(t,o,"read from private field"),r?r.call(t):o.get(t)),N=(t,o,r)=>{if(o.has(t))throw TypeError("Cannot add the same private member more than once");o instanceof WeakSet?o.add(t):o.set(t,r)},O=(t,o,r,M)=>($(t,o,"write to private field"),M?M.call(t,r):o.set(t,r),r);(function(t,o){typeof exports=="object"&&typeof module!="undefined"?o(exports):typeof define=="function"&&define.amd?define(["exports"],o):(t=typeof globalThis!="undefined"?globalThis:t||self,o(t.__LAKE__={}))})(this,function(t){var a,h;"use strict";const o=(n,e)=>Array.from((e!=null?e:document).querySelectorAll(n));class r{constructor(e){N(this,a,void 0);O(this,a,e)}get value(){return C(this,a)}set value(e){O(this,a,e)}}a=new WeakMap;const M=n=>new r(n);class b{constructor(e){N(this,h,void 0);O(this,h,e)}get value(){return C(this,h).value}}h=new WeakMap;const y=n=>new b(n);function w(n,e){if(!n)throw new Error(e||"unexpected condition")}let E=null;const A=n=>E=n,P=()=>E=null,U=n=>(w(E,`"${n}" called outside setup() will never be run.`),E);var v=(n=>(n.MOUNTED="onMounted",n.UNMOUNTED="onUnmounted",n))(v||{});class j{constructor(e,u,s){l(this,"onMounted",[]);l(this,"onUnmounted",[]);l(this,"parent",null);l(this,"uid");l(this,"provides");this.element=u,A(this);const d=e(u,s);P(),this.provides=d||{},this.uid=u.id}mount(){this.onMounted.forEach(e=>e())}unmount(){this.onUnmounted.forEach(e=>e())}addChild(e){this.onMounted.push(...e.onMounted),this.onUnmounted.push(...e.onUnmounted),e.parent=this}}function T(n){return(e,u)=>{const s=m(m({},n.props),u),d=new j(n.setup,e,s);return n.components&&Object.entries(n.components).forEach(([i,f])=>{o(i,e).forEach(H=>{const J=L(H,f,d);d.addChild(J)})}),d}}function L(n,e,u){const s=m(m({},e.props),u.provides);return T(e)(n,s)}const c=new Map,p=new WeakMap,q=(n,e,u)=>{if(p.has(n)){console.error(`The DOM of ${u} was already bind.`);return}p.set(n,e)},D=n=>n;function I(n,e){return w(!c.has(n),`${n} was already registered.`),c.set(n,T(e)),c}function k(n){return w(c.has(n),`${n} does not registered.`),c.delete(n),c}function G(n,e,u){w(c.has(u),`${u} was never registered.`);const s=c.get(u)(n,e);q(n,s,u),s.mount()}function K(n,e){o(n,e).filter(u=>p.has(u)).forEach(u=>p.get(u).unmount())}function S(n){return e=>{U(n)[n].push(e)}}const V=S(v.MOUNTED),g=S(v.MOUNTED),W=(n,e,u)=>{n.addEventListener(e,u),g(()=>{n.removeEventListener(e,u)})};function z(n,e){const u=i=>{const f=o(`[data-ref="${i}"]`,e);return s(f,i)},s=(i,f)=>{switch(i.length){case 0:return console.warn(`[data-ref="${f}"] does not exist.`),null;case 1:return i[0];default:return i}};return[...n].reduce((i,f)=>(i[f]=u(f),i),{})}function B(...n){const e=U("domRef");return{refs:z(new Set(n),e.element)}}function F(n){return D({setup(e,u){const s=new Map([["$",{rootRef:e}]]),d=new n({target:e,props:u,context:s});g(()=>{d.$destroy()})}})}t.defineComponent=D,t.mount=G,t.onMounted=V,t.onUnmounted=g,t.q=o,t.readonly=y,t.ref=M,t.register=I,t.unmount=K,t.unregister=k,t.useDOMRef=B,t.useEvent=W,t.withSvelte=F,Object.defineProperties(t,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
