var H=Object.defineProperty;var _=Object.getOwnPropertySymbols;var J=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable;var g=(e,o,u)=>o in e?H(e,o,{enumerable:!0,configurable:!0,writable:!0,value:u}):e[o]=u,m=(e,o)=>{for(var u in o||(o={}))J.call(o,u)&&g(e,u,o[u]);if(_)for(var u of _(o))Q.call(o,u)&&g(e,u,o[u]);return e};var h=(e,o,u)=>(g(e,typeof o!="symbol"?o+"":o,u),u),$=(e,o,u)=>{if(!o.has(e))throw TypeError("Cannot "+u)};var O=(e,o,u)=>($(e,o,"read from private field"),u?u.call(e):o.get(e)),C=(e,o,u)=>{if(o.has(e))throw TypeError("Cannot add the same private member more than once");o instanceof WeakSet?o.add(e):o.set(e,u)},E=(e,o,u,p)=>($(e,o,"write to private field"),p?p.call(e,u):o.set(e,u),u);(function(e,o){typeof exports=="object"&&typeof module!="undefined"?o(exports):typeof define=="function"&&define.amd?define(["exports"],o):(e=typeof globalThis!="undefined"?globalThis:e||self,o(e.__LAKE__={}))})(this,function(e){var a,l;"use strict";function o(n,t){if(!n)throw new Error(t||"unexpected condition")}const u=(n,t)=>Array.from((t!=null?t:document).querySelectorAll(n)),p=()=>{};class b{constructor(t){C(this,a,void 0);E(this,a,t)}set value(t){E(this,a,t)}get value(){return O(this,a)}}a=new WeakMap;const T=n=>new b(n);class U{constructor(t){C(this,l,void 0);E(this,l,t)}get value(){return O(this,l).value}}l=new WeakMap;const N=n=>new U(n);function D(n,t){const s=r=>{const d=u(`[data-ref="${r}"]`,t);return i(d,r)},i=(r,d)=>{switch(r.length){case 0:throw new Error(`[data-ref="${d}"] does not exist`);case 1:return r[0];default:return r}};return[...n].reduce((r,d)=>(r[d]=s(d),r),{})}let w=null;const A=n=>w=n,P=()=>w=null,R=n=>(o(w,`"${n}" called outside setup() will never be run.`),w);function j(n){R("onMounted").onMounted.push(n)}function v(n){R("onUnmounted").onUnmounted.push(n)}class L{constructor(t,s,i){h(this,"onMounted",[]);h(this,"onUnmounted",[]);h(this,"parent",null);h(this,"uid");h(this,"provides");this.element=s,A(this);const c=t(s,i,{mixin:{useDOMRef:(...r)=>({refs:D(new Set(r),s)})}});P(),this.provides=c||{},this.uid=s.id}mount(){this.onMounted.forEach(t=>t())}unmount(){this.onUnmounted.forEach(t=>t())}addChild(t){this.onMounted.push(...t.onMounted),this.onUnmounted.push(...t.onUnmounted),t.parent=this}}function S(n){return(t,s)=>{const i=m(m({},n.props),s),c=new L(n.setup,t,i);return n.components&&Object.entries(n.components).forEach(([r,d])=>{u(r,t).forEach(B=>{const F=q(B,d,c);c.addChild(F)})}),c}}function q(n,t,s){const i=m(m({},t.props),s.provides);return S(t)(n,i)}const f=new Map,M=new WeakMap,I=(n,t,s)=>{o(!M.has(n),`The DOM of ${s} was already bind.`),M.set(n,t)},y=n=>n;function k(n,t){return o(!f.has(n),`${n} was already registered.`),f.set(n,S(t)),f}function G(n){return o(f.has(n),`${n} does not registered.`),f.delete(n),f}function K(n,t,s){o(f.has(s),`${s} was never registered.`);const i=f.get(s)(n,t);I(n,i,s),i.mount()}function V(n,t){u(n,t).filter(s=>M.has(s)).forEach(s=>M.get(s).unmount())}const W=(n,t,s)=>{n.addEventListener(t,s),v(()=>{n.removeEventListener(t,s)})};function z(n){return y({setup(t,s,{mixin:i}){const c=new Map,{useDOMRef:r}=i;c.set("$",{rootRef:t,useDOMRef:r});const d=new n({target:t,props:s,context:c});v(()=>{d.$destroy()})}})}e.assert=o,e.defineComponent=y,e.mount=K,e.noop=p,e.onMounted=j,e.onUnmounted=v,e.q=u,e.readonly=N,e.ref=T,e.register=k,e.unmount=V,e.unregister=G,e.useEvent=W,e.withSvelte=z,Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
