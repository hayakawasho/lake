var Q=Object.defineProperty;var $=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var D=(t,o,r)=>o in t?Q(t,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[o]=r,M=(t,o)=>{for(var r in o||(o={}))X.call(o,r)&&D(t,r,o[r]);if($)for(var r of $(o))Y.call(o,r)&&D(t,r,o[r]);return t};var d=(t,o,r)=>(D(t,typeof o!="symbol"?o+"":o,r),r),I=(t,o,r)=>{if(!o.has(t))throw TypeError("Cannot "+r)};var f=(t,o,r)=>(I(t,o,"read from private field"),r?r.call(t):o.get(t)),N=(t,o,r)=>{if(o.has(t))throw TypeError("Cannot add the same private member more than once");o instanceof WeakSet?o.add(t):o.set(t,r)},R=(t,o,r,v)=>(I(t,o,"write to private field"),v?v.call(t,r):o.set(t,r),r);(function(t,o){typeof exports=="object"&&typeof module!="undefined"?o(exports):typeof define=="function"&&define.amd?define(["exports"],o):(t=typeof globalThis!="undefined"?globalThis:t||self,o(t.__LAKE__={}))})(this,function(t){var h,p,H,J,l;"use strict";const o=(e,n)=>Array.from((n!=null?n:document).querySelectorAll(e));class r{constructor(n){N(this,h,void 0);R(this,h,n)}get value(){return f(this,h)}set value(n){R(this,h,n)}}h=new WeakMap;const v=e=>new r(e);class x{constructor(n){N(this,p,void 0);R(this,p,n)}get value(){return f(this,p).value}}p=new WeakMap;const W=e=>new x(e),b=e=>console.warn(e),A=e=>e.forEach(n=>n());function j(e,n){if(!e)throw new Error(n||"unexpected condition")}var m=(e=>(e.MOUNTED="Mounted",e.UNMOUNTED="Unmounted",e))(m||{});const O=e=>n=>{U(e)[e].push(n)},q=O("Mounted"),w=O("Unmounted");let C=null;const y=e=>C=e,U=e=>(j(C,`"${e}" called outside setup() will never be run.`),C);let L=0;class P{constructor(n){d(this,H,[]);d(this,J,[]);d(this,"parent",null);N(this,l,[]);d(this,"uid");d(this,"current",{});d(this,"mount",()=>{A([...this[m.MOUNTED],...f(this,l).flatMap(n=>n.mount)])});d(this,"unmount",()=>{A([...this[m.UNMOUNTED],...f(this,l).flatMap(n=>n.unmount)])});d(this,"addChild",n=>{f(this,l).push(n),n.parent=this});d(this,"removeChild",n=>{const u=f(this,l).findIndex(s=>s===n);u!==-1&&(f(this,l).splice(u,1),n.parent=null)});this.element=n,this.uid=n.id||L++}}H=m.MOUNTED,J=m.UNMOUNTED,l=new WeakMap;function S(e){const n=C;return(u,s)=>{const a=y(new P(u)),c=e.setup(u,M(M({},e.props),s));return a.current=c||{},y(n),a}}const E=new WeakMap,g=(e,n,u)=>{E.has(e)&&b(`The DOM of ${u} was already bind.`),E.set(e,n)},_=e=>e;function k(){return{component(e){return(n,u={})=>{const s=S(e)(n,u);return g(n,s),s.mount(),s}},unmount(e){e.filter(n=>E.get(n)).map(n=>E.get(n).unmount())}}}const K=(e,n,u,s)=>{e.addEventListener(n,u,s),w(()=>{e.removeEventListener(n,u,s)})};function V(e,n){const u=c=>{const i=o(`[data-ref="${c}"]`,n);return s(i,c)},s=(c,i)=>{switch(c.length){case 0:return b(`[data-ref="${i}"] does not exist.`),null;case 1:return c[0];default:return c}};return[...e].reduce((c,i)=>(c[i]=u(i),c),{})}function z(...e){const n=U("domRef");return{refs:V(new Set(e),n.element)}}const B=(e,n,u={rootMargin:"0px",threshold:.1})=>{const s=new IntersectionObserver(n,u);return Array.isArray(e)?e.forEach(c=>s.observe(c)):s.observe(e),w(()=>{s.disconnect()}),{unwatch:c=>{s.unobserve(c)}}},F=()=>{const e=U("slot");return{addChild(n,u,s={}){const a=[],c=i=>{const T=S(u)(i,M(M({},u.props),s));e.addChild(T),a.push(T)};return Array.isArray(n)?n.forEach(i=>c(i)):c(n),a},removeChild(n){e.removeChild(n)}}};function G(e){return _({setup(n,u){const s=new Map([["$",{rootRef:n}]]),a=new e({target:n,props:u,context:s});w(()=>{a.$destroy()})}})}t.createApp=k,t.defineComponent=_,t.q=o,t.readonly=W,t.ref=v,t.useDOMRef=z,t.useEvent=K,t.useIntersectionWatch=B,t.useMount=q,t.useSlot=F,t.useUnmount=w,t.withSvelte=G,Object.defineProperties(t,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
