var tn=Object.defineProperty;var $=Object.getOwnPropertySymbols;var on=Object.prototype.hasOwnProperty,rn=Object.prototype.propertyIsEnumerable;var R=(t,o,s)=>o in t?tn(t,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[o]=s,m=(t,o)=>{for(var s in o||(o={}))on.call(o,s)&&R(t,s,o[s]);if($)for(var s of $(o))rn.call(o,s)&&R(t,s,o[s]);return t};var a=(t,o,s)=>(R(t,typeof o!="symbol"?o+"":o,s),s),y=(t,o,s)=>{if(!o.has(t))throw TypeError("Cannot "+s)};var C=(t,o,s)=>(y(t,o,"read from private field"),s?s.call(t):o.get(t)),U=(t,o,s)=>{if(o.has(t))throw TypeError("Cannot add the same private member more than once");o instanceof WeakSet?o.add(t):o.set(t,s)},N=(t,o,s,M)=>(y(t,o,"write to private field"),M?M.call(t,s):o.set(t,s),s);(function(t,o){typeof exports=="object"&&typeof module!="undefined"?o(exports):typeof define=="function"&&define.amd?define(["exports"],o):(t=typeof globalThis!="undefined"?globalThis:t||self,o(t.__LAKE__={}))})(this,function(t){var f,h,Q,X;"use strict";const o=(n,e)=>Array.from((e!=null?e:document).querySelectorAll(n));class s{constructor(e){U(this,f,void 0);N(this,f,e)}get value(){return C(this,f)}set value(e){N(this,f,e)}}f=new WeakMap;const M=n=>new s(n);class A{constructor(e){U(this,h,void 0);N(this,h,e)}get value(){return C(this,h).value}}h=new WeakMap;const I=n=>new A(n);function w(n,e){if(!n)throw new Error(e||"unexpected condition")}const b=n=>console.warn(n),g=n=>n.forEach(e=>e());var l=(n=>(n.MOUNTED="onMounted",n.UNMOUNTED="onUnmounted",n))(l||{});const D=n=>e=>{T(n)[n].push(e)},P=D("onMounted"),v=D("onUnmounted");let E=null;const j=n=>E=n,W=()=>E=null,T=n=>(w(E,`"${n}" called outside setup() will never be run.`),E);let q=0;class L{constructor(e){a(this,Q,[]);a(this,X,[]);a(this,"uid");a(this,"parent",null);a(this,"children",[]);a(this,"mount",()=>{g([...this[l.MOUNTED],...this.children.flatMap(e=>e.mount)])});a(this,"unmount",()=>{g([...this[l.UNMOUNTED],...this.children.flatMap(e=>e.unmount)])});this.element=e,this.uid=e.id||q++}addChild(e){this.children.push(e),e.parent=this}removeChild(e){const r=this.children.findIndex(u=>u===e);r!==-1&&(this.children.splice(r,1),e.parent=null)}}Q=l.MOUNTED,X=l.UNMOUNTED;function _(n){return(e,r)=>{const u=new L(e);j(u);const c=n.setup(e,m(m({},n.props),r))||{};return n.components&&Object.entries(n.components).forEach(([d,Z])=>{o(d,e).forEach(nn=>{const en=k(nn,Z,c);u.addChild(en)})}),W(),u}}function k(n,e,r){const u=m(m({},e.props),r);return _(e)(n,u)}const i=new Map,O=new WeakMap,G=(n,e,r)=>{O.has(n)&&b(`The DOM of ${r} was already bind.`),O.set(n,e)},S=n=>n;function K(n,e){return w(!i.has(n),`${n} was already registered.`),i.set(n,_(e)),i}function V(n){return w(i.has(n),`${n} does not registered.`),i.delete(n),i}function Y(n,e,r){w(i.has(r),`${r} was never registered.`);const u=i.get(r)(n,e);G(n,u,r),u.mount()}function x(n,e){o(n,e).filter(r=>O.has(r)).forEach(r=>O.get(r).unmount())}const z=(n,e,r)=>{n.addEventListener(e,r),v(()=>{n.removeEventListener(e,r)})};function B(n,e){const r=c=>{const d=o(`[data-ref="${c}"]`,e);return u(d,c)},u=(c,d)=>{switch(c.length){case 0:return b(`[data-ref="${d}"] does not exist.`),null;case 1:return c[0];default:return c}};return[...n].reduce((c,d)=>(c[d]=r(d),c),{})}function F(...n){const e=T("domRef");return{refs:B(new Set(n),e.element)}}const H=(n,e,r={rootMargin:"0px",threshold:.1})=>{const u=new IntersectionObserver(e,r);return Array.isArray(n)?n.forEach(c=>u.observe(c)):u.observe(n),v(()=>{u.disconnect()}),{unwatch:c=>{u.unobserve(c)}}};function J(n){return S({setup(e,r){const u=new Map([["$",{rootRef:e}]]),p=new n({target:e,props:r,context:u});v(()=>{p.$destroy()})}})}t.defineComponent=S,t.mount=Y,t.onMounted=P,t.onUnmounted=v,t.q=o,t.readonly=I,t.ref=M,t.register=K,t.unmount=x,t.unregister=V,t.useDOMRef=F,t.useEvent=z,t.useIntersectionWatch=H,t.withSvelte=J,Object.defineProperties(t,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
