var J=Object.defineProperty;var _=Object.getOwnPropertySymbols;var Q=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable;var O=(t,o,u)=>o in t?J(t,o,{enumerable:!0,configurable:!0,writable:!0,value:u}):t[o]=u,m=(t,o)=>{for(var u in o||(o={}))Q.call(o,u)&&O(t,u,o[u]);if(_)for(var u of _(o))X.call(o,u)&&O(t,u,o[u]);return t};var h=(t,o,u)=>(O(t,typeof o!="symbol"?o+"":o,u),u),$=(t,o,u)=>{if(!o.has(t))throw TypeError("Cannot "+u)};var R=(t,o,u)=>($(t,o,"read from private field"),u?u.call(t):o.get(t)),C=(t,o,u)=>{if(o.has(t))throw TypeError("Cannot add the same private member more than once");o instanceof WeakSet?o.add(t):o.set(t,u)},E=(t,o,u,w)=>($(t,o,"write to private field"),w?w.call(t,u):o.set(t,u),u);(function(t,o){typeof exports=="object"&&typeof module!="undefined"?o(exports):typeof define=="function"&&define.amd?define(["exports"],o):(t=typeof globalThis!="undefined"?globalThis:t||self,o(t.__LAKE__={}))})(this,function(t){var a,l;"use strict";function o(n,e){if(!n)throw new Error(e||"unexpected condition")}const u=(n,e)=>Array.from((e!=null?e:document).querySelectorAll(n)),w=()=>{};class b{constructor(e){C(this,a,void 0);E(this,a,e)}set value(e){E(this,a,e)}get value(){return R(this,a)}}a=new WeakMap;const T=n=>new b(n);class U{constructor(e){C(this,l,void 0);E(this,l,e)}get value(){return R(this,l).value}}l=new WeakMap;const N=n=>new U(n);let p=null;const D=n=>p=n,A=()=>p=null,v=n=>(o(p,`"${n}" called outside setup() will never be run.`),p);class P{constructor(e,s,r){h(this,"onMounted",[]);h(this,"onUnmounted",[]);h(this,"parent",null);h(this,"uid");h(this,"provides");this.element=s,D(this);const c=e(s,r);A(),this.provides=c||{},this.uid=s.id}mount(){this.onMounted.forEach(e=>e())}unmount(){this.onUnmounted.forEach(e=>e())}addChild(e){this.onMounted.push(...e.onMounted),this.onUnmounted.push(...e.onUnmounted),e.parent=this}}function S(n){return(e,s)=>{const r=m(m({},n.props),s),c=new P(n.setup,e,r);return n.components&&Object.entries(n.components).forEach(([i,f])=>{u(i,e).forEach(F=>{const H=j(F,f,c);c.addChild(H)})}),c}}function j(n,e,s){const r=m(m({},e.props),s.provides);return S(e)(n,r)}const d=new Map,M=new WeakMap,L=(n,e,s)=>{o(!M.has(n),`The DOM of ${s} was already bind.`),M.set(n,e)},y=n=>n;function q(n,e){return o(!d.has(n),`${n} was already registered.`),d.set(n,S(e)),d}function I(n){return o(d.has(n),`${n} does not registered.`),d.delete(n),d}function k(n,e,s){o(d.has(s),`${s} was never registered.`);const r=d.get(s)(n,e);L(n,r,s),r.mount()}function G(n,e){u(n,e).filter(s=>M.has(s)).forEach(s=>M.get(s).unmount())}function K(n){v("onMounted").onMounted.push(n)}function g(n){v("onUnmounted").onUnmounted.push(n)}const V=(n,e,s)=>{n.addEventListener(e,s),g(()=>{n.removeEventListener(e,s)})};function W(n,e){const s=i=>{const f=u(`[data-ref="${i}"]`,e);return r(f,i)},r=(i,f)=>{switch(i.length){case 0:throw new Error(`[data-ref="${f}"] does not exist`);case 1:return i[0];default:return i}};return[...n].reduce((i,f)=>(i[f]=s(f),i),{})}function z(...n){const e=v("domRef");return{refs:W(new Set(n),e.element)}}function B(n){return y({setup(e,s){const r=new Map([["$",{rootRef:e}]]),c=new n({target:e,props:s,context:r});g(()=>{c.$destroy()})}})}t.assert=o,t.defineComponent=y,t.mount=k,t.noop=w,t.onMounted=K,t.onUnmounted=g,t.q=u,t.readonly=N,t.ref=T,t.register=q,t.unmount=G,t.unregister=I,t.useDOMRef=z,t.useEvent=V,t.withSvelte=B,Object.defineProperties(t,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
