(function(e,u){typeof exports=="object"&&typeof module!="undefined"?u(exports):typeof define=="function"&&define.amd?define(["exports"],u):(e=typeof globalThis!="undefined"?globalThis:e||self,u(e.__LAKE__={}))})(this,function(e){"use strict";var U=Object.defineProperty;var j=(e,u,c)=>u in e?U(e,u,{enumerable:!0,configurable:!0,writable:!0,value:c}):e[u]=c;var h=(e,u,c)=>(j(e,typeof u!="symbol"?u+"":u,c),c);function u(n,t){if(!n)throw new Error(t||"unexpected condition")}const c=(n,t)=>Array.from((t!=null?t:document).querySelectorAll(n)),w=n=>typeof n=="function";function C(){}class _{constructor(t){h(this,"onUnmount",[]);h(this,"unmount",()=>{this.onUnmount.forEach(t=>t())});const o=t||C;this.onUnmount.push(o)}addChild(t){this.onUnmount.push(t.unmount)}}function m({setup:n,components:t}){return(o,i)=>{const d=n(o,i),r=new _(d);return t&&Object.entries(t).forEach(([f,E])=>{c(f).forEach(b=>{const D=E.props||{},L=m(E)(b,D);r.addChild(L)})}),r}}const s=new Map,a=new WeakMap;function $(n,t){a.set(n,t)}function p(n){return n}function v(n,t){return u(!s.has(n),`${n} was already registered`),s.set(n,m(t)),s}function M(n){return u(s.has(n),`${n} does not registered`),s.delete(n),s}function R(n,t,o){u(s.has(o),`${o} was never registered`);const i=s.get(o);$(n,i(n,t))}function g(n,t=document.body){c(n,t).filter(o=>a.has(o)).forEach(o=>a.get(o).unmount())}let F;function l(){throw new Error("Function called outside component initialization")}function y(n){l().$$.on_destroy.push(n)}function S(n){return l().$$.context.get(n)}Promise.resolve();function A(n,t){const o=r=>{const f=c(`[data-ref="${r}"]`,t);return i(f,r)},i=(r,f)=>{switch(r.length){case 0:throw new Error(`data-ref="${f}" does not exist`);case 1:return r[0];default:return r}};return[...n].reduce((r,f)=>(r[f]=o(f),r),{})}function P(n){return{setup(t,o){const i=new Map;i.set("$",{rootRef:t,useDOMRef:(...r)=>({refs:A(new Set(r),t)})});const d=new n({target:t,props:o,context:i});return()=>{d.$destroy(),i.clear()}}}}function N(){return S("$")}function O(n,t,o,i){const d=Array.isArray(n);d?n.forEach(r=>r.addEventListener(t,o,i)):n.addEventListener(t,o,i),y(()=>{d?n.forEach(r=>r.removeEventListener(t,o,i)):n.removeEventListener(t,o,i)})}e.assert=u,e.defineComponent=p,e.getContext$=N,e.isFunc=w,e.mount=R,e.q=c,e.register=v,e.unmount=g,e.unregister=M,e.useEvent=O,e.withSvelte=P,Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
