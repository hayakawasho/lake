var T=Object.defineProperty;var k=(t,o,r)=>o in t?T(t,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[o]=r;var $=(t,o,r)=>(k(t,typeof o!="symbol"?o+"":o,r),r),v=(t,o,r)=>{if(!o.has(t))throw TypeError("Cannot "+r)};var m=(t,o,r)=>(v(t,o,"read from private field"),r?r.call(t):o.get(t)),w=(t,o,r)=>{if(o.has(t))throw TypeError("Cannot add the same private member more than once");o instanceof WeakSet?o.add(t):o.set(t,r)},M=(t,o,r,l)=>(v(t,o,"write to private field"),l?l.call(t,r):o.set(t,r),r);(function(t,o){typeof exports=="object"&&typeof module!="undefined"?o(exports):typeof define=="function"&&define.amd?define(["exports"],o):(t=typeof globalThis!="undefined"?globalThis:t||self,o(t.__LAKE__={}))})(this,function(t){var h,a;"use strict";function o(n,e){if(!n)throw new Error(e||"unexpected condition")}const r=(n,e)=>Array.from((e!=null?e:document).querySelectorAll(n)),l=n=>typeof n=="function";function R(){}class g{constructor(e){$(this,"parent",null);w(this,h,[]);w(this,a,void 0);M(this,a,e||R)}unmount(){m(this,h).forEach(e=>e.unmount()),m(this,a).call(this)}addChild(e){m(this,h).push(e),e.parent=this}}h=new WeakMap,a=new WeakMap;function p(n){const{setup:e,components:u}=n;return(c,s)=>{const i=new g(e(c,s));return u&&y(u).forEach(I=>i.addChild(I)),i}}function y(n){return Object.entries(n).reduce((e,[u,c])=>(r(u).forEach(s=>e.push(p(c)(s,{}))),e),[])}const f=new Map,E=new WeakMap;function S(n,e){E.set(n,e)}function C({setup:n,components:e}){return{setup:n,components:e}}function A(n,e){return o(!f.has(n),`${n} was already registered`),f.set(n,p(e)),f}function b(n){return o(f.has(n),`${n} does not registered`),f.delete(n),f}function O(n,e,u){o(f.has(u),`${u} was never registered`);const c=f.get(u);S(n,c(n,e))}function P(n,e=document.body){r(n,e).filter(u=>E.has(u)).forEach(u=>E.get(u).unmount())}let x;function _(){throw new Error("Function called outside component initialization")}function N(n){_().$$.on_destroy.push(n)}function D(n){return _().$$.context.get(n)}Promise.resolve();function L(n,e){const u=i=>{const d=r(`[data-ref="${i}"]`,e);return c(d,i)},c=(i,d)=>{switch(i.length){case 0:throw new Error(`data-ref="${d}" does not exist`);case 1:return i[0];default:return i}};return[...n].reduce((i,d)=>(i[d]=u(d),i),{})}function j(n){return C({setup(e,u){const c=new Map;c.set("$",{rootRef:e,useDOMRef:(...i)=>({refs:L(new Set(i),e)})});const s=new n({target:e,props:u,context:c});return()=>{s.$destroy(),c.clear()}}})}function F(){return D("$")}function q(n,e,u,c){const s=Array.isArray(n);s?n.forEach(i=>i.addEventListener(e,u,c)):n.addEventListener(e,u,c),N(()=>{s?n.forEach(i=>i.removeEventListener(e,u,c)):n.removeEventListener(e,u,c)})}t.assert=o,t.defineComponent=C,t.getContext$=F,t.isFunc=l,t.mount=O,t.q=r,t.register=A,t.unmount=P,t.unregister=b,t.useEvent=q,t.withSvelte=j,Object.defineProperties(t,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
